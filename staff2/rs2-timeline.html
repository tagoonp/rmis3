<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>:: RMIS :: สำหรับเจ้าหน้าที่ ::</title>

    <!-- Data table CSS -->
    <!-- <link href="../v4/bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet"> -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" rel="stylesheet">

    <!--alerts CSS -->
    <link href="../v3/vendors/bower_components/sweetalert/dist/sweetalert.css" rel="stylesheet" type="text/css">

    <!-- Data table CSS -->
    <link href="../v3/vendors/bower_components/datatables/media/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css"/>

    <!-- Fontawesom -->
    <link href="../v4/bower_components/fontawesome/web-fonts-with-css/css/fontawesome-all.css" rel="stylesheet">

    <link rel="stylesheet" href="../v4/node_modules/preload.js/dist/css/preload.css">

    <link rel="stylesheet" href="../v4/assets/css/style.css">

  </head>

  <style media="screen">
    body{
      background: rgb(245, 245, 245);
    }
  </style>

  <body>

    <div class="leftmenu" style="background: rgb(60, 68, 74);">
      <div></div>
      <div class="pd-10 fz09">
        <div class="pd-10 txt-light">
          <div class="row">
            <div class="col-10">
              <img src="../images/rmis2-logo.png" alt="" class="" style="width: 100%;">
            </div>
            <div class="col-2 text-right dn" id="divCloseLeft">
              <i class="fas fa-times fa-1x cp mt-5" onclick="slideMenu('close')"></i>
            </div>
          </div>
        </div>
      </div>
      <div class="pd-10 fz09">
        <div class="pt-5 pb-5 pl-10 pr-10 txt-light cp mn" onclick="gotoInfoPage()">
          <div class="fz09">สวัสดี</div>
          <a href="profile.html" class="text-white">คุณ<span class="userFullname text-white">NA</span> (STAFF)</a>
        </div>
        <div class="pt-5 pb-5 pl-10 pr-10 txt-light cp mn mt-10" onclick="window.location = 'profile.html'">
          <i class="fas fa-chevron-right mr-10"></i>ข้อมูลส่วนตัว
        </div>
        <div class="pt-5 pb-5 pl-10 pr-10 txt-light cp mn" onclick="window.location = 'changepassword.html'">
          <i class="fas fa-chevron-right mr-10"></i>เปลี่ยนรหัสผ่าน
        </div>
        <div class="pt-5 pb-5 pl-10 pr-10 txt-light cp mn" onclick="main.signout()">
          <i class="fas fa-chevron-right mr-10"></i>ออกจากระบบ
        </div>
      </div>
      <div class="pd-10 fz09">
        <div class="pd-10 txt-light fz08">
          การดำเนินการ
        </div>
        <div class="pt-5 pb-5 pl-10 pr-10 txt-light cp mn" onclick="window.location = 'index.html'">
          <i class="fas fa-home mr-10"></i>หน้าแรก
        </div>
        <div class="pd-10 txt-light fz08">
          ข้อมูลโครงการวิจัย
        </div>
        <div class="pt-5 pb-5 pl-10 pr-10 txt-light cp mn" onclick="gotoInfoPage()">
          <i class="fas fa-chevron-right mr-10"></i>ข้อมูลโครงการวิจัย
        </div>
        <div class="pt-5 pb-5 pl-10 pr-10 txt-light cp mn" onclick="window.location = 'rs2-synopsys.html'">
          <i class="fas fa-chevron-right mr-10"></i>Synopsis
        </div>
        <div class="pt-5 pb-5 pl-10 pr-10 txt-light cp mn" onclick="window.location = 'rs2-file-attached.html'">
          <i class="fas fa-chevron-right mr-10"></i>เอกสารแนบ
        </div>
        <div class="pt-5 pb-5 pl-10 pr-10 txt-light cp mn bg-danger" onclick="window.location = 'rs2-operation.html'" >
          <i class="fas fa-wrench mr-10"></i>ดำเนินการ
        </div>
        <div class="pt-5 pb-5 pl-10 pr-10 txt-light cp mn" onclick="window.location = 'rs2-interview-info.html'">
          <i class="fas fa-chevron-right mr-10"></i>ข้อมูลการประเมิน/ส่งประเมิน
        </div>
        <div class="pt-5 pb-5 pl-10 pr-10 txt-light cp mn" onclick="window.location = 'rs2-question.html'">
          <i class="fas fa-chevron-right mr-10"></i>ข้อคำถาม/ข้อเสนอแนะ
        </div>
        <div class="pt-5 pb-5 pl-10 pr-10 txt-light cp mn"  onclick="window.location = 'rs2-board-agender.html'">
          <i class="fas fa-chevron-right mr-10"></i>วาระการเข้าที่ประชุม
        </div>
        <div class="pt-5 pb-5 pl-10 pr-10 txt-light cp mn"  onclick="window.location = 'rs2-approve-docs.html'">
          <i class="fas fa-chevron-right mr-10"></i>ใบรับรอง/รับทราบ
        </div>
        <div class="pt-5 pb-5 pl-10 pr-10 txt-light cp mn"  onclick="window.location = 'rs2-activity-log.html'">
          <i class="fas fa-chevron-right mr-10"></i>Activity log
        </div>
        <div class="pt-5 pb-5 pl-10 pr-10 txt-light cp mn mn-active"  onclick="window.location = 'rs2-timeline.html'">
          <i class="fas fa-chevron-right mr-10"></i>Timeline
        </div>
        <div class="pt-5 pb-5 pl-10 pr-10 txt-light cp mn"  onclick="window.location = 'rs2-messaging.html'">
          <i class="fas fa-chevron-right mr-10"></i>Messaging
        </div>
      </div>

    </div>

    <div class="main-panal pt-20 mb-30">
      <div class="container">
        <div class="row">
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-12">
                <h4>ข้อมูลโครงการวิจัย</h4>
              </div>
              <div class="col-sm-12 fz08 pb-10">
                <a href="index.html" class="txt-dark"><i class="fas fa-home mr-10"></i>หน้าหลัก</a> / <a href="Javascript:gotoInfoPage()" class="txtCodes">ยังไม่ระบุรหัสโครงการ</a> / Timeline
              </div>
            </div>
          </div>
          <div class="col-sm-12">
            <div class="card mt-5 bsd">
              <div class="card-header text-white pl-10" style="background: rgb(93, 129, 127);">
                Response date in Timeline
              </div>
              <div class="card-body pd-0">
                <table class="table table-bordered mb-0">
                  <thead>
                    <tr style="background: rgb(21, 184, 130);" class="f500">
                      <th class="txt-light" style="width: 200px;">บุคคลใน Timeline</th>
                      <th class="txt-light">ระยะเวลา (วัน)</th>
                      <th class="txt-light">จำนวนครั้งที่ถูกนับ</th>
                    </tr>
                  </thead>
                  <tbody class="personSpan">
                                                <tr>
                                                  <td>หัวหน้าโครงการวิจัย </td>
                                                  <td id="pi_day">0</td>
                                                  <td id="pi_round">0</td>
                                                </tr>
                                                <tr>
                                                  <td>เจ้าหน้าที่ </td>
                                                  <td id="st_day">0</td>
                                                  <td id="st_round">0</td>
                                                </tr>
                                                <tr>
                                                  <td>เลขา </td>
                                                  <td id="ec_day">0</td>
                                                  <td id="ec_round">0</td>
                                                </tr>
                                                <tr>
                                                  <td>ผู้เชี่ยวชาญอิสระ </td>
                                                  <td id="rw_day">0</td>
                                                  <td id="rw_round">0</td>
                                                </tr>
                                                <tr>
                                                  <td>ประธานฯ </td>
                                                  <td id="cm_day">0</td>
                                                  <td id="cm_round">0</td>
                                                </tr>
                                              </tbody>
                </table>
              </div>
            </div>
            <!-- .card -->

          </div>
        </div>
      </div>
    </div>

    <!-- Update 20181008 -->
    <div class="leftmenu-tool" style="position: fixed; top: 10px; left: -10px; ">
      <button class="btn btn-sm btn-square_ btn-success ml-0 text-right cp" style="width: 50px; font-size:20px;" onclick="slideMenu('open')"><i class="fas fa-chevron-right"></i></button>
      <br>
      <button class="btn btn-sm btn-square_ btn-secondary ml-0 mt-0 text-right cp" onclick="window.location = 'index.html'" style="width: 50px; font-size: 18px;"><i class="fas fa-home" style="margin-left: -5px;"></i></button>
      <br>
      <button class="btn btn-sm btn-square_ btn-secondary ml-0 mt-0 text-right cp" onclick="window.location = 'profile.html'" style="width: 50px; font-size: 18px;"><i class="fas fa-user" style="margin-left: -3px;"></i></button>
      <br>
      <button class="btn btn-sm btn-square_ btn-secondary ml-0 mt-0 text-right cp" style="width: 50px; font-size: 20px;" onclick="window.history.back()"><i class="fas fa-chevron-left" style="margin-left: -1px;"></i></button>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="MyModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel" style="font-weight: 400;">เพิ่มบันทึกสำหรับงานวิจัย</h5>
            <button type="button" class="close btnClosemodal" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form onsubmit="return false;">

              <div class="form-group">
                <label for="" class="fz08">การคำนวณวันดำเนินการ <span class="text-danger">**</span></label>
                <select name="txtCanrange" id="txtCanrange" class="form-control">
                  <option value="0" selected>ไม่ใช้เพื่อคำนวน Timeline</option>
                  <option value="1" >ใช้คำนวน Timeline</option>
                </select>
              </div>

              <div class="form-group">
                <label for="" class="fz08">ข้อความหรือบันทึกสำหรับโครงการวิจัยนี้ <span class="text-danger">**</span></label>
                <textarea name="name" rows="8" cols="80" class="form-control" id="txtNoteinfo"></textarea>
              </div>


            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary cp" data-dismiss="modal">ปิด</button>
            <button type="button" class="btn btn-success cp" onclick="note.save_note()">บันทึก</button>
          </div>
        </div>
      </div>
    </div>

    <!-- jQuery -->
    <!-- <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script> -->
    <script src="../v3/vendors/bower_components/jquery/dist/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"></script>
  	<script src="../v3/dist/js/jquery.slimscroll.js"></script>
  	<!-- Fancy Dropdown JS -->
  	<!-- <script src="../v3/dist/js/dropdown-bootstrap-extended.js"></script> -->
    <!-- Sweet-Alert  -->
  	<script src="../v3/vendors/bower_components/sweetalert/dist/sweetalert.min.js"></script>
    <!-- Data table JavaScript -->
    <script type="text/javascript" src="../v3/vendors/bower_components/ckeditor_lite/ckeditor.js"></script>

  	<!-- Init JavaScript -->
    <script src="../v4/config.js"></script>
  	<script src="../v3/dist/js/init.js"></script>
    <script src="../v3/main.js"></script>
    <script src="../v4/staff.js"></script>
    <script src="../v3/rs_note.js"></script>

    <script type="text/javascript" src="../v4/node_modules/preload.js/dist/js/preload.js"></script>

    <script type="text/javascript">

    var current_rs_id = window.localStorage.getItem('current_selected_project_id')
    var current_rs = window.localStorage.getItem('current_selected_project_session')
    var rs_note = ''
      $(document).ready(function(){
        $w = $(document).width()
        if($w <= 800){
          $('.main-panal').css('padding-left', '40px')
          $('.leftmenu').css('margin-left', '-250px')
          $('.leftmenu-tool').show()
          $('#divCloseLeft').removeClass('dn')
        }

        staff.load_rs_info_2();

        rs_note = CKEDITOR.replace( 'txtNoteinfo', {
          wordcount : {
  					showCharCount : false,
  					showWordCount : true
  				},
          height: '250px'
        });

        note.load_note()

      })

      function showModal(id){
        $("#" + id).modal();
      }

      function  loadList(){
        var param = $.post(ws_url + 'controller/staff/check-board-status.php', function(){},'json')
                     .always(function(snap){
                       console.log(snap);
                      if((snap!='') && (snap.length > 0)){
                        $('#table_data_1').empty()
                        snap.forEach(function(i){
                          $row = '<tr>' +
                                    '<td>' + i.code_apdu + '</td>' +
                                    '<td>' + i.title_th +
                                      '<div class="fz08 text-muted">' +
                                        'หัวหน้าโครงการวิจัย : ' + i.fname + ' ' + i.lname + '<br>' +
                                        'เลขา EC ผู้รับผิดชอบ : ' + i.fname + ' ' + i.lname + '<br>' +
                                        'เลขาการประชุม : ' + i.fname + ' ' + i.lname + '<br>' +
                                        'ลงทะเบียนเมื่อ : ' + main_app.convertThaidatetime(i.date_submit) +
                                      '</div>' +
                                      '<div class="fz08 text-muted">' +
                                        '<button class="btn btn-success btn-sm btn-icon-anim btn-square ml-0" style="box-shadow: none;" data-toggle="tooltip" data-placement="top" title="ดูข้อมูลโครงการและดำเนินการต่อ" onclick="viewRsInfo_15(\'' + i.id_rs +'\')"><i class="fa fa-search"></i></button>' +
                                        '<button class="btn btn-warning btn-sm btn-icon-anim btn-square ml-0" style="box-shadow: none;" data-toggle="tooltip" data-placement="top" title="เปลี่ยนเลขา EC ผู้รับผิดชอบ" onclick="set_reponse_ec(\'' + i.id_rs +'\')"><i class="fa fa-user"></i></button>' +
                                        '<button class="btn btn-warning btn-sm btn-icon-anim btn-square ml-0" style="box-shadow: none;" data-toggle="tooltip" data-placement="top" title="เปลี่ยนเลขา EC ผู้รับผิดชอบ" onclick="set_reponse_ec(\'' + i.id_rs +'\')"><i class="fa fa-users"></i></button>' +
                                        '<button class="btn btn-danger btn-sm btn-icon-anim btn-square ml-0" style="box-shadow: none;" data-toggle="tooltip" data-placement="top" title="เปลี่ยนเลขา EC ผู้รับผิดชอบ" onclick="set_reponse_ec(\'' + i.id_rs +'\')"><i class="fa fa-trash"></i></button>' +
                                      '</div>' +
                                    '</td>' +
                                    '<td>' + i.ep + '</td>' +
                                    '<td>' + i.status_name + '</td>' +
                                 '</tr>'
                          $('#table_data_1').append($row)

                        })
                        preload.hide()
                        setTimeout(function(){ $('[data-toggle="tooltip"]').tooltip()}, 3000)
                      }else{
                        preload.hide()
                      }
                     })
      }

      function viewRsInfo_15(rid){
        var param = {
          id_rs: rid,
          id: current_user
        }
        var jxhr = $.post(ws_url + '/controller/staff/check-rs-session.php', param, function(){}, 'json')
              .always(function(snap){
                if((snap != '') && (snap.length > 0)){
                  snap.forEach(function(i){
                    window.localStorage.setItem('current_selected_project_session', i.session_id)
                    window.localStorage.setItem('current_selected_project_id', i.id_rs)
                    window.location = 'reviewer_select_file.html'
                  })
                }else{
                  swal("Error!", "error")
                }
              }, 'json')
      }

      function slideMenu(state){
        if(state == 'open'){
          $( ".leftmenu" ).animate({ "left": "+=250px" }, "slow" );
          // $('.main-panal').animate({ "padding-left": "+=250px" }, "slow" );
        }else{
          $( ".leftmenu" ).animate({ "left": "-=250px" }, "slow" );
          // $('.main-panal').animate({ "padding-left": "-=250px" }, "slow" );
        }
      }
    </script>
  </body>
</html>
