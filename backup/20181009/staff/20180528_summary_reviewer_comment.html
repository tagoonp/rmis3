<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv='cache-control' content='no-cache'>
  <meta http-equiv='expires' content='0'>
  <meta http-equiv='pragma' content='no-cache'>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<title>:: RMIS :: สำหรับเจ้าหน้าที่ ::</title>

	<!-- Data table CSS -->
	<link href="../v3/vendors/bower_components/datatables/media/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css"/>

  <!--alerts CSS -->
	<link href="../v3/vendors/bower_components/sweetalert/dist/sweetalert.css" rel="stylesheet" type="text/css">

  <!-- Data table CSS -->
  <link href="../v3/vendors/bower_components/datatables/media/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" href="../v3/vendors/bower_components/bootstrap-datepicker/bootstrap-datepicker3.min.css" />
  <link rel="stylesheet" href="../v3/vendors/bower_components/dropzonejs/dropzone.min.css" />

	<!-- Custom CSS -->
	<link href="../v3/dist/css/style.css" rel="stylesheet" type="text/css">
  <link href="../v3/fonts.css" rel="stylesheet" type="text/css">
  <link href="../v3/style.css" rel="stylesheet" type="text/css">
  <style media="screen">
    .qp ol{
      padding-left: 30px;
    }

    .qp ul{
      padding-left: 30px;
    }

    ol{
      padding-left: 30px;
    }
  </style>

</head>

<body>
	<!--Preloader-->
	<div class="preloader-it">
		<div class="la-anim-1"></div>
	</div>
	<!--/Preloader-->
    <div class="wrapper theme-1-active pimary-color-red">

        <!-- Top Menu Items -->
		<nav class="navbar navbar-inverse navbar-fixed-top">
			<div class="mobile-only-brand pull-left">
				<div class="nav-header pull-left">
					<div class="logo-wrap">
						<a href="index.html">
							<img class="brand-img" src="../v3/dist/img/logo.png" alt="brand"/>
							<span class="brand-text">RMIS</span>
						</a>
					</div>
				</div>
				<a id="toggle_nav_btn" class="toggle-left-nav-btn inline-block ml-20 pull-left" href="javascript:void(0);"><i class="zmdi zmdi-menu"></i></a>
				<a id="toggle_mobile_nav" class="mobile-only-view" href="javascript:void(0);"><i class="zmdi zmdi-more"></i></a>
			</div>
			<div id="mobile_only_nav" class="mobile-only-nav pull-right">
				<ul class="nav navbar-right top-nav pull-right">
          <li>
            <a href="profile.html">ยินดีต้อนรับ <span class="userFullname text-info">NA</span> (STAFF)</a>
          </li>
					<li class="dropdown alert-drp">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="zmdi zmdi-notifications top-nav-icon"></i><span class="notification_number"></span></a>
						<ul  class="dropdown-menu alert-dropdown" data-dropdown-in="bounceIn" data-dropdown-out="bounceOut">
							<li>
								<div class="notification-box-head-wrap">
									<span class="notification-box-head pull-left inline-block">การแจ้งเตือน</span>
									<a class="txt-danger pull-right clear-notifications inline-block" href="javascript:main.clear_notify()"> ล้างทั้งหมด </a>
									<div class="clearfix"></div>
									<hr class="light-grey-hr ma-0"/>
								</div>
							</li>
              <li>
                <div class="streamline message-nicescroll-bar notification_panal">
                </div>
              </li>
							<li>
								<div class="notification-box-bottom-wrap">
									<hr class="light-grey-hr ma-0"/>
									<a class="block text-center read-all" href="view_activity_log.html"> อ่านทั้งหมด </a>
									<div class="clearfix"></div>
								</div>
							</li>
						</ul>
					</li>
					<li class="dropdown auth-drp">
						<a href="#" class="dropdown-toggle pr-0" data-toggle="dropdown"><span id="profileImg"></span><span class="user-online-status"></span></a>
						<ul class="dropdown-menu user-auth-dropdown" data-dropdown-in="flipInX" data-dropdown-out="flipOutX">
							<li>
								<a href="profile.html"><i class="zmdi zmdi-account"></i><span>ข้อมูลส่วนตัว</span></a>
							</li>
							<li>
								<a href="#" onclick="main.mailbox()"><i class="zmdi zmdi-email"></i><span>Inbox</span></a>
							</li>
							<li>
								<a href="changepassword.html"><i class="zmdi zmdi-settings"></i><span>เปลี่ยนรหัสผ่าน</span></a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#" onclick="main.signout()"><i class="zmdi zmdi-power"></i><span>ออกจากระบบ</span></a>
							</li>
						</ul>
					</li>
				</ul>
			</div>
		</nav>
		<!-- /Top Menu Items -->

		<!-- Left Sidebar Menu -->
		<div class="fixed-sidebar-left">
			<ul class="nav navbar-nav side-nav nicescroll-bar">
				<li class="navigation-header">
					<span>Main</span>
					<i class="zmdi zmdi-more"></i>
				</li>

        <li>
					<a  href="./"><div class="pull-left"><i class="zmdi zmdi-home mr-20"></i><span class="right-nav-text">หน้าแรก</span></div><div class="clearfix"></div></a>
				</li>
        <li>
						<a href="javascript:void(0);" data-toggle="collapse" data-target="#dashboard_dr"><div class="pull-left"><i class="zmdi zmdi-landscape mr-20"></i><span class="right-nav-text">กระดานภาพรวม</span></div><div class="pull-right"><i class="zmdi zmdi-caret-down"></i></div><div class="clearfix"></div></a>
						<ul id="dashboard_dr" class="collapse collapse-level-1">
							<li>
								<a href="dashboard_1.html">ภาพรวมโครงการวิจัย</a>
							</li>
						</ul>
					</li>

				<li><hr class="light-grey-hr mb-10"/></li>
				<li class="navigation-header">
					<span>อื่น ๆ</span>
					<i class="zmdi zmdi-more"></i>
				</li>

        <li>
					<a href="documentation.html"><div class="pull-left"><i class="zmdi zmdi-book mr-20"></i><span class="right-nav-text">คู่มือการใช้งาน (STAFF)</span></div><div class="clearfix"></div></a>
				</li>

			</ul>
		</div>
		<!-- /Left Sidebar Menu -->


		<!-- Main Content -->
		<div class="page-wrapper" style="padding-left: 15px; padding-right: 15px;">
      <div class="container-fluid">

				<!-- Title -->
        <div class="row heading-bg mb-0">
					<div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
						<h5 class="txt-dark">ข้อมูลโครงการวิจัย</h5>
					</div>
					<!-- Breadcrumb -->
					<div class="col-lg-9 col-sm-8 col-md-8 col-xs-12">
						<ol class="breadcrumb">
							<li><a href="./">หน้าแรก</a></li>
							<li class="active"><span>ข้อมูลโครงการวิจัย</span></li>
						</ol>
					</div>
					<!-- /Breadcrumb -->
				</div>
				<!-- /Title -->

        <!-- Row -->
        <div class="row">

          <div class="col-sm-12">

            <div class="row">
              <div class="col-sm-6 pl-10 pr-10 pb-10 pt-0 hidden-xs">
                <button class="btn btn-default btn-icon-anim btn-square" onclick="window.history.back()"><i class="zmdi zmdi-chevron-left"></i></button>
              </div>
              <div class="col-sm-6 col-xs-12 pl-10 pr-10 pb-10 pt-0 text-right">
                <button class="btn btn-success btn-icon-anim btn-square" id="btnEdit" onclick="window.location = 'research_register.html'"><i class="zmdi zmdi-wrench"></i></button>
                <button class="btn btn-success btn-icon-anim btn-square disabled" onclick="printForm('printArea')" id="btnPrint"><i class="zmdi zmdi-print"></i></button>
                <button class="btn btn-info" onclick="sendData()" id="btnSending"><i class="zmdi zmdi-mail-send"></i> ส่งข้อมูล</button>
              </div>
            </div>

            <div class="panel panel-default card-view">

              <div class="panel-wrapper collapse in">
								<div class="panel-body">

                  <div class="loaddiv" style="padding: 100px 0px;">
                    <div class="row">
                      <div class="col-sm-2 col-sm-offset-5">
                        <img src="../images/Rolling.gif" alt="" width="100%">
                      </div>
                    </div>
                  </div>

                  <div class="contentdiv dn">
                    <div class="row" id="printArea">
                      <div class="col-md-12 pl-20 pr-20 pt-20">
                        <div style="padding-left: 20px; padding-right: 20px;">
                          <div class="row">
                            <div class="col-sm-12">
                              <div class="text-center">
                                <div class="pa-20" style="background: rgb(244, 244, 244); border: solid; border-width: 1px; ">
                                  <h5 class="f500">แบบชี้แจงต่อข้อคำถามหรือข้อเสนอแนะของคณะกรรมการจริยธรรม</h5>
                                  <h6 class="f500">Response to EC comments</h6>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- sample modal content -->
      										<div class="modal fade bs-example-modal-sm-adddate" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="display: none;">
      											<div class="modal-dialog modal-sm">
      												<div class="modal-content">
      													<div class="modal-header" style="background: rgb(41, 134, 59);">
      														<button type="button" class="close" data-dismiss="modal" aria-hidden="true" id="btnBoxClose1">×</button>
      														<h5 class="modal-title txt-light" id="mySmallModalLabel">ระบุวันประชุม</h5>
      													</div>
      													<div class="modal-body">
                                  <div class="form-group">
                                    <label for="" class="txt-dark">เลือกวันประชุม <span class="txt-danger">**</span></label>
                                    <input class="form-control js-datepicker "  type="text" id="start_date" name="start_date"  data-provide="datepicker" data-date-language="th-th"  data-date-format="yyyy-mm-dd" placeholder="yyyy-mm-dd" style="margin-bottom: 0px;" readonly />
                                  </div>
                                  <div class="form-group">
                                    <button class="btn btn-success btn-block" onclick="updateMeetingDate()">บันทึก</button>
                                  </div>
                                </div>
      												</div>
      												<!-- /.modal-content -->
      											</div>
      											<!-- /.modal-dialog -->
      										</div>
      										<!-- /.modal -->

                          <!-- sample modal content -->
      										<div class="modal fade bs-example-modal-sm-addresult" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="display: none;">
      											<div class="modal-dialog modal-sm">
      												<div class="modal-content">
      													<div class="modal-header" style="background: rgb(41, 134, 59);">
      														<button type="button" class="close" data-dismiss="modal" aria-hidden="true" id="btnBoxClose2">×</button>
      														<h5 class="modal-title txt-light" id="mySmallModalLabel">ระบุมติการประชุม</h5>
      													</div>
      													<div class="modal-body">
                                  <div class="form-group">
                                    <label for="" class="txt-dark">เลือกมติ <span class="txt-danger">**</span></label>
                                    <select class="form-control" name="txtFBResult" id="txtFBResult">
                                      <option value="">-- เลือก --</option>
                                      <option value="1">Approve</option>
                                      <option value="2">Minor</option>
                                      <option value="3">Major</option>
                                      <option value="4">Dis-approve</option>
                                    </select>
                                  </div>

                                  <div class="form-group dn" id="resultAppDiv">
                                    <label for="" class="txt-dark">ช่วงการรายงาน <span class="txt-danger">**</span></label>
                                    <select class="form-control" name="txtFBResultApprove" id="txtFBResultApprove">
                                      <option value="">-- เลือก --</option>
                                      <option value="12">1 ปี</option>
                                      <option value="6">6 เดือน</option>
                                      <option value="3">3 เดือน</option>
                                      <option value="0">ไม่ต้องรายงานความก้าวหน้า</option>
                                    </select>
                                  </div>

                                  <div class="form-group">
                                    <button class="btn btn-success btn-block" onclick="updateMeetingResult()">บันทึก</button>
                                  </div>
                                </div>
      												</div>
      												<!-- /.modal-content -->
      											</div>
      											<!-- /.modal-dialog -->
      										</div>
      										<!-- /.modal -->

                          <div class="row pt-20">
                            <div class="col-xs-4 txt-dark">ครั้งที่, วันที่ประชุม :</div>
                            <div class="col-xs-8"><span id="txtDatemeeting" class="txt-danger">ยังไม่ระบุ</span> <span class="editFB dn" id="editFB">&nbsp;&nbsp;&nbsp;<a href="#" class="text-muted fs08" data-toggle="modal" data-target=".bs-example-modal-sm-adddate"><i class="zmdi zmdi-edit"></i>  แก้ไข</a></span></div>
                          </div>

                          <div class="row">
                            <div class="col-xs-4 txt-dark">REC. :</div>
                            <div class="col-xs-8"><span id="txtCode" class="txt-danger">ยังไม่กำหนด</span></div>
                          </div>

                          <div class="row">
                            <div class="col-xs-4 txt-dark">ชื่อโครงการ (ภาษาไทย) :</div>
                            <div class="col-xs-8"><span id="txtThtitle" class="txt-danger">ยังไม่กำหนด</span></div>
                          </div>

                          <div class="row">
                            <div class="col-xs-4 txt-dark">ชื่อโครงการ (ภาษาอังกฤษ) :</div>
                            <div class="col-xs-8"><span id="txtEntitle" class="txt-danger">ยังไม่กำหนด</span></div>
                          </div>

                          <div class="row">
                            <div class="col-xs-4 txt-dark">หัวหน้าโครงการ : </div>
                            <div class="col-xs-8"><span id="txtPi" class="txt-danger">ยังไม่กำหนด</span></div>
                          </div>

                          <div class="row">
                            <div class="col-xs-4 txt-dark">ประเภทการพิจารณา</div>
                            <div class="col-xs-8"><span id="txtRTypess" class="txt-danger">ยังไม่กำหนด</span></div>
                          </div>

                          <div class="row editFB dn">
                            <div class="col-xs-4 txt-dark">มติ</div>
                            <div class="col-xs-8"><span id="txtResult" class="txt-danger">ยังไม่กำหนด</span> <span class="editFB dn" id="editFB">&nbsp;&nbsp;&nbsp;<a href="#" class="text-muted fs08" data-toggle="modal" data-target=".bs-example-modal-sm-addresult"><i class="zmdi zmdi-edit"></i>  แก้ไข</a></span></div>
                          </div>

                          <div class="row">
                            <div class="col-xs-4 txt-dark">วันที่ส่งกลับ EC</div>
                            <div class="col-xs-8"><span id="txtRTypessDate" class="txt-danger">ยังไม่กำหนด</span></div>
                          </div>

                          <!-- <div class="row pb-20">
                            <div class="col-xs-4 txt-dark">เลขา EC<br>(หากเป็น Fullboard จะแสดงเลขาการประชุม)</div>
                            <div class="col-xs-8"><span id="txtEcname" class="txt-danger">ไม่ทราบ</span></div>
                          </div> -->

                          <!-- sample modal content -->
      										<div class="modal fade bs-example-modal-lg-1" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
      											<div class="modal-dialog modal-lg">
      												<div class="modal-content">
      													<div class="modal-header" style="background: #5cb85c;">
      														<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      														<h5 class="modal-title txt-light f500" id="myLargeModalLabel">เพิ่ม General comment</h5>
      													</div>
      													<div class="modal-body">
      														<div class="form" onsubmit="return false;">
                                    <div class="form-group">
                                      <label for="" class="f500 txt-dark">General comments <span class="txt-danger">**</span></label>
                                      <textarea name="brief_reports" id="brief_reports" rows="8" cols="80" class="form-control" placeholder="กรอกชื่อแหล่งทุนวิจัย หรือ ใส่เครื่องหมายลบ (-) ..."></textarea>
                                    </div>
                                    <div class="form-group">
                                      <button type="button" class="btn btn-success btn-block" onclick="addComment(1)">เพิ่ม</button>
                                    </div>
                                  </div>
      													</div>
      												</div>
      												<!-- /.modal-content -->
      											</div>
      											<!-- /.modal-dialog -->
      										</div>
      										<!-- /.modal -->

                          <!-- sample modal content -->
      										<div class="modal fade bs-example-modal-lg-1-2" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
      											<div class="modal-dialog modal-lg">
      												<div class="modal-content">
      													<div class="modal-header" style="background: #5cb85c;">
      														<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      														<h5 class="modal-title txt-light f500" id="myLargeModalLabel">แก้ไข General comment</h5>
      													</div>
      													<div class="modal-body">
      														<div class="form" onsubmit="return false;">
                                    <div class="form-group">
                                      <label for="" class="f500 txt-dark">ข้อความถึงผู้เชี่ยวชาญอิสระ <span class="txt-danger">**</span></label>
                                      <textarea name="brief_reports2" id="brief_reports2" rows="8" cols="80" class="form-control" placeholder="กรอกชื่อแหล่งทุนวิจัย หรือ ใส่เครื่องหมายลบ (-) ..."></textarea>
                                    </div>
                                    <div class="form-group">
                                      <button type="button" class="btn btn-success btn-block" onclick="addComment2(1)">ปรับปรุงข้อมูล</button>
                                    </div>
                                  </div>
      													</div>
      												</div>
      												<!-- /.modal-content -->
      											</div>
      											<!-- /.modal-dialog -->
      										</div>
      										<!-- /.modal -->

                          <table class="table customtable table-bordered" border="0" style="border:none !important; font-size: 1.0em;">
                            <tbody id="">
                              <tr>
                                <td colspan="2" class="f500 txt-dark" style="background: #e6e6e6; font-size: 18px; padding-top: 25px;"><div>General comment</div> <button class="btn btn-success btn-square btn-xs" style="float: right; margin-top: -35px;" data-toggle="modal" data-target=".bs-example-modal-lg-1" ><i class="zmdi zmdi-plus"></i></button></td>
                              </tr>
                              <tr>
                                <td colspan="2"><div id="p1" class="qp">ยังไม่มีข้อคำถาม/ข้อแสนอแนะ</div></td>
                              </tr>
                            </tbody>
                          </table>

                          <!-- sample modal content -->
      										<div class="modal fade bs-example-modal-lg-2" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
      											<div class="modal-dialog modal-lg">
      												<div class="modal-content">
      													<div class="modal-header" style="background: #5cb85c;">
      														<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      														<h5 class="modal-title txt-light f500" id="myLargeModalLabel">เพิ่มข้อคำถามระเบียบวิธีวิจัย</h5>
      													</div>
      													<div class="modal-body">
      														<div class="form" onsubmit="return false;">
                                    <div class="form-group">
                                      <label for="" class="f500 txt-dark">คำถามหรือข้อเสนอแนะ <span class="txt-danger">**</span></label>
                                      <textarea name="qp1" id="qp1" rows="8" cols="80" class="form-control" placeholder="กรอกข้อคำถาม/ข้อเสนอแนะ ..."></textarea>
                                    </div>
                                    <div class="form-group">
                                      <button type="button" class="btn btn-success btn-block" onclick="addComment(2)">เพิ่ม</button>
                                    </div>
                                  </div>
      													</div>
      												</div>
      												<!-- /.modal-content -->
      											</div>
      											<!-- /.modal-dialog -->
      										</div>
      										<!-- /.modal -->
                          <!-- sample modal content -->
      										<div class="modal fade bs-example-modal-lg-2-2" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
      											<div class="modal-dialog modal-lg">
      												<div class="modal-content">
      													<div class="modal-header" style="background: #5cb85c;">
      														<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      														<h5 class="modal-title txt-light f500" id="myLargeModalLabel">เพิ่มข้อคำถามระเบียบวิธีวิจัย</h5>
      													</div>
      													<div class="modal-body">
      														<div class="form" onsubmit="return false;">
                                    <div class="form-group">
                                      <label for="" class="f500 txt-dark">คำถามหรือข้อเสนอแนะ <span class="txt-danger">**</span></label>
                                      <textarea name="qp1" id="qp1-2" rows="8" cols="80" class="form-control" placeholder="กรอกข้อคำถาม/ข้อเสนอแนะ ..."></textarea>
                                    </div>
                                    <div class="form-group">
                                      <button type="button" class="btn btn-success btn-block" onclick="addComment2(2)">ปรับปรุงข้อมูล</button>
                                    </div>
                                  </div>
      													</div>
      												</div>
      												<!-- /.modal-content -->
      											</div>
      											<!-- /.modal-dialog -->
      										</div>
      										<!-- /.modal -->

                          <table class="table customtable table-bordered" border="0" style="border:none !important; font-size: 1.0em;">
                            <tbody id="">
                              <tr>
                                <td colspan="2" class="f500 txt-dark" style="background: #e6e6e6; font-size: 18px; padding-top: 25px;"><div>ระเบียบวิธีวิจัย</div> <button class="btn btn-success btn-square btn-xs" style="float: right; margin-top: -35px;"  data-toggle="modal" data-target=".bs-example-modal-lg-2" ><i class="zmdi zmdi-plus"></i></button></td>
                              </tr>
                            </tbody>
                            <tbody id="p2">
                              <tr>
                                  <td colspan="2">ไม่มีข้อมูล</td>
                              </tr>
                            </tbody>


                          </table>

                          <!-- sample modal content -->
      										<div class="modal fade bs-example-modal-lg-3" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
      											<div class="modal-dialog modal-lg">
      												<div class="modal-content">
      													<div class="modal-header" style="background: #5cb85c;">
      														<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      														<h5 class="modal-title txt-light f500" id="myLargeModalLabel">เพิ่มข้อคำถามกระบวนการขอความยินยอม</h5>
      													</div>
      													<div class="modal-body">
      														<div class="form" onsubmit="return false;">
                                    <div class="form-group">
                                      <label for="" class="f500 txt-dark">คำถามหรือข้อเสนอแนะ <span class="txt-danger">**</span></label>
                                      <textarea name="qp2" id="qp2" rows="8" cols="80" class="form-control" placeholder="กรอกข้อคำถาม/ข้อเสนอแนะ ..."></textarea>
                                    </div>
                                    <div class="form-group">
                                      <button type="button" class="btn btn-success btn-block" onclick="addComment(3)">เพิ่ม</button>
                                    </div>
                                  </div>
      													</div>
      												</div>
      												<!-- /.modal-content -->
      											</div>
      											<!-- /.modal-dialog -->
      										</div>
      										<!-- /.modal -->

                          <!-- sample modal content -->
      										<div class="modal fade bs-example-modal-lg-3-2" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
      											<div class="modal-dialog modal-lg">
      												<div class="modal-content">
      													<div class="modal-header" style="background: #5cb85c;">
      														<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      														<h5 class="modal-title txt-light f500" id="myLargeModalLabel">เพิ่มข้อคำถามกระบวนการขอความยินยอม</h5>
      													</div>
      													<div class="modal-body">
      														<div class="form" onsubmit="return false;">
                                    <div class="form-group">
                                      <label for="" class="f500 txt-dark">คำถามหรือข้อเสนอแนะ <span class="txt-danger">**</span></label>
                                      <textarea name="qp2" id="qp2-2" rows="8" cols="80" class="form-control" placeholder="กรอกข้อคำถาม/ข้อเสนอแนะ ..."></textarea>
                                    </div>
                                    <div class="form-group">
                                      <button type="button" class="btn btn-success btn-block" onclick="addComment2(3)">ปรับปรุงข้อมูล</button>
                                    </div>
                                  </div>
      													</div>
      												</div>
      												<!-- /.modal-content -->
      											</div>
      											<!-- /.modal-dialog -->
      										</div>
      										<!-- /.modal -->

                          <table class="table customtable table-bordered" border="0" style="border:none !important; font-size: 1.0em;">
                            <tbody id="">
                              <tr>
                                <td colspan="2" class="f500 txt-dark" style="background: #e6e6e6; font-size: 18px; padding-top: 25px;"><div>กระบวนการขอความยินยอม</div> <button class="btn btn-success btn-square btn-xs" style="float: right; margin-top: -35px;"  data-toggle="modal" data-target=".bs-example-modal-lg-3"><i class="zmdi zmdi-plus"></i></button></td>
                              </tr>
                            </tbody>
                            <tbody id="p3">
                              <tr>
                                  <td colspan="2">ไม่มีข้อมูล</td>
                              </tr>
                            </tbody>
                          </table>

                          <!-- sample modal content -->
      										<div class="modal fade bs-example-modal-lg-4" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
      											<div class="modal-dialog modal-lg">
      												<div class="modal-content">
      													<div class="modal-header" style="background: #5cb85c;">
      														<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      														<h5 class="modal-title txt-light f500" id="myLargeModalLabel">เพิ่มข้อคำถามอื่น ๆ</h5>
      													</div>
      													<div class="modal-body">
      														<div class="form" onsubmit="return false;">
                                    <div class="form-group">
                                      <label for="" class="f500 txt-dark">คำถามหรือข้อเสนอแนะ <span class="txt-danger">**</span></label>
                                      <textarea name="qp3" id="qp3" rows="8" cols="80" class="form-control" placeholder="กรอกข้อคำถาม/ข้อเสนอแนะ ..."></textarea>
                                    </div>
                                    <div class="form-group">
                                      <button type="button" class="btn btn-success btn-block" onclick="addComment(4)">เพิ่ม</button>
                                    </div>
                                  </div>
      													</div>
      												</div>
      												<!-- /.modal-content -->
      											</div>
      											<!-- /.modal-dialog -->
      										</div>
      										<!-- /.modal -->

                          <div class="modal fade bs-example-modal-lg-4-2" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
      											<div class="modal-dialog modal-lg">
      												<div class="modal-content">
      													<div class="modal-header" style="background: #5cb85c;">
      														<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      														<h5 class="modal-title txt-light f500" id="myLargeModalLabel">เพิ่มข้อคำถามอื่น ๆ</h5>
      													</div>
      													<div class="modal-body">
      														<div class="form" onsubmit="return false;">
                                    <div class="form-group">
                                      <label for="" class="f500 txt-dark">คำถามหรือข้อเสนอแนะ <span class="txt-danger">**</span></label>
                                      <textarea name="qp3" id="qp3-2" rows="8" cols="80" class="form-control" placeholder="กรอกข้อคำถาม/ข้อเสนอแนะ ..."></textarea>
                                    </div>
                                    <div class="form-group">
                                      <button type="button" class="btn btn-success btn-block" onclick="addComment2(4)">ปรับปรุงข้อมูล</button>
                                    </div>
                                  </div>
      													</div>
      												</div>
      												<!-- /.modal-content -->
      											</div>
      											<!-- /.modal-dialog -->
      										</div>
      										<!-- /.modal -->

                          <table class="table customtable table-bordered" border="0" style="border:none !important; font-size: 1.0em;">
                            <tbody id="">
                              <tr>
                                <td colspan="2" class="f500 txt-dark" style="background: #e6e6e6; font-size: 18px; padding-top: 25px;"><div>อื่น ๆ</div> <button class="btn btn-success btn-square btn-xs" style="float: right; margin-top: -35px;"  data-toggle="modal" data-target=".bs-example-modal-lg-4"><i class="zmdi zmdi-plus"></i></button></td>
                              </tr>
                            </tbody>
                            <tbody id="p4">
                              <tr>
                                  <td colspan="2">ไม่มีข้อมูล</td>
                              </tr>
                            </tbody>
                          </table>

                          <!-- sample modal content -->
      										<div class="modal fade bs-example-modal-lg-5" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
      											<div class="modal-dialog modal-lg">
      												<div class="modal-content">
      													<div class="modal-header" style="background: #5cb85c;">
      														<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      														<h5 class="modal-title txt-light f500" id="myLargeModalLabel">เพิ่ม Note </h5>
      													</div>
      													<div class="modal-body">
      														<div class="form" onsubmit="return false;">
                                    <div class="form-group">
                                      <label for="" class="txt-dark f500">หัวข้อ <span class="txt-danger">**</span></label>
                                      <input type="text" name="txtNotetitle" id="txtNotetitle" value="" class="form-control" placeholder="กรอกหัวข้อเรื่อง ...">
                                    </div>
                                    <div class="form-group">
                                      <label for="" class="f500 txt-dark">คำถามหรือข้อเสนอแนะ <span class="txt-danger">**</span></label>
                                      <textarea name="qp4" id="qp4" rows="8" cols="80" class="form-control" placeholder="กรอกข้อมูล ..."></textarea>
                                    </div>
                                    <div class="form-group">
                                      <button type="button" class="btn btn-success btn-block" onclick="addComment(5)">เพิ่ม</button>
                                    </div>
                                  </div>
      													</div>
      												</div>
      												<!-- /.modal-content -->
      											</div>
      											<!-- /.modal-dialog -->
      										</div>
      										<!-- /.modal -->

                          <div class="modal fade bs-example-modal-lg-fullnote" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
      											<div class="modal-dialog modal-lg">
      												<div class="modal-content">
      													<div class="modal-header" style="background: #5cb85c;">
      														<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      														<h5 class="modal-title txt-light f500" id="myLargeModalLabel">บันทึกแบบเต็ม </h5>
      													</div>
      													<div class="modal-body">
                                  <table class="table table-bordered">
                                    <thead>
                                      <tr style="background: rgb(21, 184, 130);" class="f500">
                                        <th class="txt-light" style="width: 200px;">วัน - เวลา</th>
                                        <th class="txt-light">ข้อความ</th>
                                        <th class="txt-light" style="width: 100px;">โดย</th>
                                      </tr>
                                    </thead>
                                    <tbody class="noteSpan">
                                      <tr>
                                        <td colspan="3">ไม่พบข้อมูลบันทึก </td>
                                      </tr>
                                    </tbody>
                                  </table>
      													</div>
      												</div>
      												<!-- /.modal-content -->
      											</div>
      											<!-- /.modal-dialog -->
      										</div>
      										<!-- /.modal -->

                          <!-- sample modal content -->
      										<div class="modal fade bs-example-modal-lg-5-2" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
      											<div class="modal-dialog modal-lg">
      												<div class="modal-content">
      													<div class="modal-header" style="background: #5cb85c;">
      														<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      														<h5 class="modal-title txt-light f500" id="myLargeModalLabel">เพิ่ม Note </h5>
      													</div>
      													<div class="modal-body">
      														<div class="form" onsubmit="return false;">
                                    <div class="form-group">
                                      <label for="" class="txt-dark f500">หัวข้อ <span class="txt-danger">**</span></label>
                                      <input type="text" name="txtNotetitle2" id="txtNotetitle2" value="" class="form-control" placeholder="กรอกหัวข้อเรื่อง ...">
                                    </div>
                                    <div class="form-group">
                                      <label for="" class="f500 txt-dark">คำถามหรือข้อเสนอแนะ <span class="txt-danger">**</span></label>
                                      <textarea name="qp4-2" id="qp4-2" rows="8" cols="80" class="form-control" placeholder="กรอกข้อมูล ..."></textarea>
                                    </div>
                                    <div class="form-group">
                                      <button type="button" class="btn btn-success btn-block" onclick="addComment2(5)">ปรับปรุงข้อมูล</button>
                                    </div>
                                  </div>
      													</div>
      												</div>
      												<!-- /.modal-content -->
      											</div>
      											<!-- /.modal-dialog -->
      										</div>
      										<!-- /.modal -->

                          <table class="table customtable table-bordered" border="0" style="border:none !important; font-size: 1.0em;">
                            <tbody id="">
                              <tr>
                                <td colspan="2" class="f500 txt-dark" style="background: #e6e6e6; font-size: 18px; padding-top: 25px;">
                                  <div class="row">
                                    <div class="col-sm-8">
                                      Note สำหรับเจ้าหน้าที่
                                    </div>
                                    <div class="col-sm-4 pt-5 text-right">
                                      <button class="btn btn-success btn-square_ btn-xs" style="float_: right; margin-top: -15px; padding-top: 11px; padding-bottom: 11px;" data-toggle="modal" data-target=".bs-example-modal-lg-fullnote"><i class="zmdi zmdi-search"></i> ดูบันทึกแบบเต็ม</button>
                                      <button class="btn btn-success btn-square btn-xs" style="float_: right; margin-top: -15px;" data-toggle="modal" data-target=".bs-example-modal-lg-5"><i class="zmdi zmdi-plus"></i></button>
                                    </div>
                                  </div>
                                </td>
                              </tr>
                            </tbody>
                            <tbody id="p5" class="qp">
                              <tr>
                                <td colspan="2">ไม่มีข้อมูล</td>
                              </tr>
                            </tbody>
                          </table>

                          <div class="row">
                            <div class="col-sm-12">
                              <button class="btn btn-success btn-block" id="btnFbtoEC" onclick="SendtoECSec()" disabled>ส่งเลขาเพื่อพิจารณา</button>
                            </div>
                          </div>


                        </div>
                        <div class="row">
                          <div class="col-sm-12 text-right pr-50 pt-10" style="font-size: 0.8em;">
                            หมายเลขอ้างอิง : <span class="txtSessid">NA</span>
                          </div>
                        </div>
            					</div>
                    </div>
                  </div>
                  <!-- .contentdiv -->



                </div>
                <!-- .panel-body -->
              </div>
              <!-- .panel-wrapper -->
            </div>
            <!-- .panel -->
          </div>





        </div>
        <!-- .Row -->









				<!-- Footer -->
				<footer class="footer container-fluid pl-30 pr-30">
					<div class="row">
						<div class="col-sm-12">
							<p>2017 &copy; <a href="http://rmis.medicine.psu.ac.th/project/" target="_blank">RMIS</a>. หน่วยส่งเสริมและพัฒนาทางวิชาการ คณะแพทยศาสตร์ มหาวิทยาลัยสงขลานครินทร์. Develop by <a href="https://wisniorproject.com" target="_blank">Wisnior Corp.</a></p>
						</div>
					</div>
				</footer>
				<!-- /Footer -->
			</div>
		</div>
        <!-- /Main Content -->

    </div>
    <!-- /#wrapper -->

	<!-- JavaScript -->

  <!-- jQuery -->
  <script src="../v3/vendors/bower_components/jquery/dist/jquery.min.js"></script>

  <!-- Bootstrap Core JavaScript -->
  <script src="../v3/vendors/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

	<!-- Data table JavaScript -->
	<script src="../v3/vendors/bower_components/datatables/media/js/jquery.dataTables.min.js"></script>
	<script src="../v3/dist/js/dataTables-data.js"></script>

	<!-- Slimscroll JavaScript -->
	<script src="../v3/dist/js/jquery.slimscroll.js"></script>

	<!-- Owl JavaScript -->
	<script src="../v3/vendors/bower_components/owl.carousel/dist/owl.carousel.min.js"></script>

	<!-- Switchery JavaScript -->
	<script src="../v3/vendors/bower_components/switchery/dist/switchery.min.js"></script>

	<!-- Fancy Dropdown JS -->
	<script src="../v3/dist/js/dropdown-bootstrap-extended.js"></script>

  <!-- Sweet-Alert  -->
	<script src="../v3/vendors/bower_components/sweetalert/dist/sweetalert.min.js"></script>
  <script src="../v3/vendors/bower_components/dropzonejs/dropzone.min.js"></script>

  <script src="../v3/vendors/bower_components/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>
	<script src="../v3/vendors/bower_components/bootstrap-datepicker-thai-thai/js/bootstrap-datepicker-thai.js"></script>
	<script src="../v3/vendors/bower_components/bootstrap-datepicker-thai-thai/js/locales/bootstrap-datepicker.th.js"></script>

  <!-- Data table JavaScript -->
  <script src="../v3/vendors/bower_components/datatables/media/js/jquery.dataTables.min.js"></script>
  <script src="../v3/dist/js/dataTables-data.js"></script>

  <script type="text/javascript" src="../v3/vendors/bower_components/ckeditor_lite/ckeditor.js"></script>

	<!-- Init JavaScript -->
	<script src="../v3/dist/js/init.js"></script>
  <script src="../v3/rs_note.js"></script>
  <script src="../v3/main.js"></script>
  <script src="../v3/staff.js"></script>

  <script type="text/javascript">



    var current_user = window.localStorage.getItem('rmis_current_user')
    var current_role = window.localStorage.getItem('rmis_current_role')
    var current_rs = window.localStorage.getItem('current_selected_project_session')
    var current_rs_id = window.localStorage.getItem('current_selected_project_id')
    var editData = '';
    var editData1 = '';
    var editData2 = '';
    var editData22 = '';
    var filenum = 0;
    var filesummarynum = 0;
    var cn_session_id = main_app.randomString(20);
    var nextStatusCheck = 0;
    var checkrtype = '';
    var ccrid = null;
    var fb_status = 0;

    var editData_qp1 = '';
    var editData_qp1_2 = '';
    var editData_qp2 = '';
    var editData_qp2_2 = '';
    var editData_qp3 = '';
    var editData_qp3_2 = '';

    note.add_note_btn()
    note.add_param()

    $(document).ready(function(){

      if(current_rs == null){
        swal({    title: "เกิดข้อผิดพลาด",
                    text: "ไม่พบข้อมูลงานวิจัยที่ต้องการ กรุณาลองใหม่ หรือติดต่อเจ้าหน้าที่!",
                    type: "error",
                    showCancelButton: false,
                    confirmButtonColor: "#DD6B55",
                    confirmButtonText: "รับทราบ",
                    closeOnConfirm: false },
                    function(){
                     window.location = './'
                    });
      }

      $('.docSess').val(cn_session_id)
      $('.docSessID').val(current_rs_id)
      $('.docUser').val(current_user)

      main.load_year();

      staff.init()

      setTimeout(function(){
        staff.load_rs_info_2();
        setTimeout(function(){
          checkNextStatus();
        }, 1000)
        note.load_note()
      }, 1000)

      // loadProgressTransection();
      // checkReviewer();
      // checkDataSummary();
      // loadComment()
      loadStaffLog()
      setTimeout(function(){
        loadComment()
      }, 2000)

      $('#txtCodeBCIDRS').val(current_rs_id)

      editData = CKEDITOR.replace( 'brief_reports', {
        wordcount : {
					showCharCount : false,
					showWordCount : true
				},
        height: '150px'
      });

      editData1 = CKEDITOR.replace( 'brief_reports2', {
        wordcount : {
					showCharCount : false,
					showWordCount : true
				},
        height: '150px'
      });

      editData2 = CKEDITOR.replace( 'qp4', {
        wordcount : {
					showCharCount : false,
					showWordCount : true
				},
        height: '150px'
      });

      editData22 = CKEDITOR.replace( 'qp4-2', {
        wordcount : {
          showCharCount : false,
          showWordCount : true
        },
        height: '150px'
      });

      editData_qp1 = CKEDITOR.replace( 'qp1', {
        wordcount : {
          showCharCount : false,
          showWordCount : true
        },
        height: '150px'
      });

      editData_qp1_2 = CKEDITOR.replace( 'qp1-2', {
        wordcount : {
          showCharCount : false,
          showWordCount : true
        },
        height: '150px'
      });

      editData_qp2 = CKEDITOR.replace( 'qp2', {
        wordcount : {
          showCharCount : false,
          showWordCount : true
        },
        height: '150px'
      });

      editData_qp2_2 = CKEDITOR.replace( 'qp2-2', {
        wordcount : {
          showCharCount : false,
          showWordCount : true
        },
        height: '150px'
      });

      editData_qp3 = CKEDITOR.replace( 'qp3', {
        wordcount : {
          showCharCount : false,
          showWordCount : true
        },
        height: '150px'
      });

      editData_qp3_2 = CKEDITOR.replace( 'qp3-2', {
        wordcount : {
          showCharCount : false,
          showWordCount : true
        },
        height: '150px'
      });

      $('#btnSummary').click(function(){
        swal({
          title: "ยืนยันการดำเนินการ",
          text: "ยืนยันการไปสู่หน้าส่งข้อเสนอแนะต่อเลขา EC",
          type: "warning",
          showCancelButton: true,
          confirmButtonColor: "#DD6B55",
          confirmButtonText: "ตกลง",
          cancelButtonText: "ยกเลิก",
          closeOnConfirm: true
        },function(){
          window.location = 'summary_reviewer_comment.html'
        })
      })

      $('.addFileForm').submit(function(){
        var f1 = 0;
        var f2 = 0;
        var f3 = 0;
        var f4 = 0;
        var f5 = 0;
        var f6 = 0;

        if($("#cb1").is(':checked')){ f1 = 1}
        if($("#cb2").is(':checked')){ f2 = 2}
        if($("#cb3").is(':checked')){ f3 = 3}
        if($("#cb4").is(':checked')){ f4 = 4}
        if($("#cb5").is(':checked')){ f5 = 5}
        if($("#cb6").is(':checked')){ f6 = 6}

        if((f1 == 0) && (f2 == 0) && (f3 == 0) && (f4 == 0) && (f5 == 0) && (f6 == 0)){
          swal("คำเตือน", "กรุณาเลือกไฟล์แนบ", "error")
          return ;
        }

        var param = {
          file1: f1,
          file2: f2,
          file3: f3,
          file4: f4,
          file5: f5,
          file6: f6,
          id: current_user,
          ririd: $('#txtRID').val()
        }

        var jxhr = $.post(ws_url + 'controller/staff/set_reviewer_file.php', param, function(){})
                    .always(function(resp){
                      if(resp != 'Y'){
                        alert('resp')
                        return ;
                      }

                      window.location.reload()
                    })
      })

    })

    Dropzone.options.myFile1 = {
      acceptedFiles: 'application/pdf, .docx, .doc',
      maxFilesize: 100,
      init: function(){

        this.on("complete", function(file) {
          console.log(file);
          if(file.xhr.responseText == 'Y'){
            filenum = 1;
          }

        });
      }
    };

    function SendtoECSec(){
      //Check status 6
      swal({
        title: "คำเตือน",
        text: "คุณยืนยันส่งข้อมูลไปยังเลขา EC หรือไม่",
        type: "warning",
        showCancelButton: true,
        confirmButtonColor: "#DD6B55",
        confirmButtonText: "ยืนยัน",
        cancelButtonText: "ยกเลิก",
        closeOnConfirm: true },
      function(){
        lp.sl()

        var param = {
              id: current_user,
              id_rs: current_rs_id
        }

        var jxhr = $.post(ws_url + 'controller/staff/send_review_summary.php', param, function(){})
                    .always(function(r){
                      if(r == 'Y'){
                        setTimeout(function(){
                          swal({
                            title: "ดำเนินการสำเร็จ",
                            text: "ข้อมูลถูกส่งไปยังเลขา EC เรียบร้อยแล้ว",
                            type: "warning",
                            showCancelButton: false,
                            confirmButtonColor: "#DD6B55",
                            confirmButtonText: "รับทราบ",
                            cancelButtonText: "ยกเลิก",
                            closeOnConfirm: true },
                          function(){
                            window.location = 'rs-list-wait-process-review.html'
                          })
                        }, 1000)
                      }else{
                        swal("ขออภัย", "เกิดข้อผิดพลาด กรุณาติดต่อผู้ดูแลระบบ", "error")
                        lp.hl()
                        return ;
                      }
                    })
                    .fail(function(){ onFail() })
      })
    }

    function deleteQ(id){
      swal({    title: "คำเตือน",
              text: "คุณยืนยันการลบข้อคำถามนี้หรือไม่",
              type: "warning",
              showCancelButton: true,
              confirmButtonColor: "#DD6B55",
              confirmButtonText: "ลบ",
              cancelButtonText: "ยกเลิก",
              closeOnConfirm: true },
              function(){

                lp.sl()

                var param = {
                  rwid: id
                }

                var jxhr = $.post(ws_url + 'controller/deleteCommentQuestion.php', param, function(){})
                            .always(function(r){
                              if(r == 'Y'){
                                window.location.reload()
                              }else{
                                swal("ขออภัย", "ไม่สามารถลบข้อมูลได้", "error")
                                lp.hl()
                                return ;
                              }
                            })
                            .fail(function(){
                              onFail()
                            })
              });
    }

    function setEContent(lid, rid){

      ccrid = rid

      if(lid == 1){
        var param = {
          r_id: rid
        }

        var jxhr = $.post(ws_url + 'controller/readCommentQuestion2.php', param, function(){}, 'json')
                    .always(function(r){
                      r.forEach(function(i){
                        editData1.setData(i.riwc_q)
                      })
                    }, 'json')

      }else if(lid == 2){
        var param = {
          part_id: 2,
          r_id: rid,
          id_rs: current_rs_id
        }

        var jxhr = $.post(ws_url + 'controller/readCommentQuestion2.php', param, function(){}, 'json')
                    .always(function(r){
                      r.forEach(function(i){
                        // $('#qp1-2').val(i.riwc_q)
                        editData_qp1_2.setData(i.riwc_q)
                      })
                    })

      }else if(lid == 3){
        var param = {
          part_id: 3,
          r_id: rid,
          id_rs: current_rs_id
        }

        var jxhr = $.post(ws_url + 'controller/readCommentQuestion2.php', param, function(){}, 'json')
                    .always(function(r){
                      r.forEach(function(i){
                        // $('#qp2-2').val(i.riwc_q)
                        editData_qp2_2.setData(i.riwc_q)
                      })
                    })

      }else if(lid == 4){
        var param = {
          part_id: 4,
          r_id: rid,
          id_rs: current_rs_id
        }

        var jxhr = $.post(ws_url + 'controller/readCommentQuestion2.php', param, function(){}, 'json')
                    .always(function(r){
                      r.forEach(function(i){
                        // $('#qp3-2').val(i.riwc_q)
                        editData_qp3_2.setData(i.riwc_q)
                      })
                    })

      }else if(lid == 5){
        var param = {
          r_id: rid
        }

        var jxhr = $.post(ws_url + 'controller/readCommentQuestion2.php', param, function(){}, 'json')
                    .always(function(r){
                      r.forEach(function(i){
                        editData22.setData(i.riwc_q)
                        $('#txtNotetitle2').val(i.rirc_key)
                      })
                    }, 'json')

      }
    }

    function loadComment(){
      ccrid = null
      for(var i = 1; i <= 5; i++){
        var param = {
          part_id: i,
          id_rs: current_rs_id
        }

        var jxhr = $.post(ws_url + 'controller/readCommentQuestion.php', param, function(){}, 'json')
                    .always(function(snap){
                      // console.log(snap);
                      if((snap != '') && (snap.length > 0)){

                        var a1 = '';
                        var a2 = '';
                        var a3 = '';
                        var a4 = '';
                        var a5 = '';

                        snap.forEach(function(i){
                          if(i.riwc_part == 1){
                            a1 += i.riwc_q + '<div class="pt-10"><button class="btn btn-success btn-xs  pl-10 pr-10" data-toggle="modal" data-target=".bs-example-modal-lg-1-2" onclick="setEContent(1, \'' + i.riwc_id  + '\')"><i class="zmdi zmdi-edit"></i> แก้ไข</button> <button class="btn btn-info btn-xs  pl-10 pr-10"  onclick="deleteQ(\'' + i.riwc_id + '\')"><i class="zmdi zmdi-delete"></i> ลบ</button></div>';
                          }

                          if(i.riwc_part == 2){
                            a2 += '<tr>' +
                                    '<td class="f500 col-sm-3">คำถามหรือข้อเสนอแนะ :</td>' +
                                    '<td>' + i.riwc_q + '<div class="pt-10"><button class="btn btn-success btn-xs  pl-10 pr-10"   data-toggle="modal" data-target=".bs-example-modal-lg-2-2"  onclick="setEContent(2, \'' + i.riwc_id  + '\')"><i class="zmdi zmdi-edit"></i> แก้ไข</button> <button class="btn btn-info btn-xs  pl-10 pr-10"  onclick="deleteQ(\'' + i.riwc_id + '\')"><i class="zmdi zmdi-delete"></i> ลบ</0</div>' +
                                    '</td>' +
                                  '</tr>';
                          }

                          if(i.riwc_part == 3){
                            a3 += '<tr>' +
                                    '<td class="f500 col-sm-3">คำถามหรือข้อเสนอแนะ :</td>' +
                                    '<td>' + i.riwc_q + '<div class="pt-10"><button class="btn btn-success btn-xs  pl-10 pr-10"   data-toggle="modal" data-target=".bs-example-modal-lg-3-2"  onclick="setEContent(3, \'' + i.riwc_id  + '\')"><i class="zmdi zmdi-edit"></i> แก้ไข</button> <button class="btn btn-info btn-xs pl-10 pr-10"  onclick="deleteQ(\'' + i.riwc_id + '\')"><i class="zmdi zmdi-delete"></i> ลบ</0</div>' +
                                    '</td>' +
                                  '</tr>';
                          }

                          if(i.riwc_part == 4){
                            a4 += '<tr>' +
                                    '<td class="f500 col-sm-3">คำถามหรือข้อเสนอแนะ :</td>' +
                                    '<td>' + i.riwc_q + '<div class="pt-10"><button class="btn btn-success btn-xs  pl-10 pr-10"  data-toggle="modal" data-target=".bs-example-modal-lg-4-2"  onclick="setEContent(4, \'' + i.riwc_id  + '\')"><i class="zmdi zmdi-edit"></i> แก้ไข</button> <button class="btn btn-info btn-xs  pl-10 pr-10" onclick="deleteQ(\'' + i.riwc_id + '\')"><i class="zmdi zmdi-delete"></i> ลบ</0</div>' +
                                    '</td>' +
                                  '</tr>';
                          }

                          if(i.riwc_part == 5){
                            a5 += '<tr>' +
                                    '<td colspan="2"><div class="f500 txt-dark">' + i.rirc_key + ' <small>(' + main_app.convertThaidatetime(i.riwc_staff_add_date) + ')</small></div>' + i.riwc_q + '<div class="pt-10"><button class="btn btn-success btn-xs  pl-10 pr-10"  data-toggle="modal" data-target=".bs-example-modal-lg-5-2"  onclick="setEContent(5, \'' + i.riwc_id  + '\')"><i class="zmdi zmdi-edit"></i> แก้ไข</button> <button class="btn btn-info btn-xs  pl-10 pr-10" onclick="deleteQ(\'' + i.riwc_id + '\')"><i class="zmdi zmdi-delete"></i> ลบ</0</div>' +
                                    '</td>' +
                                  '</tr>';
                          }
                        })

                        if(a1 != ''){
                          $('#p1').empty()
                          $('#p1').html(a1)
                        }

                        if(a2 != ''){
                          $('#p2').empty()
                          $('#p2').html(a2)
                        }

                        if(a3 != ''){
                          $('#p3').html(a3)
                        }

                        if(a4 != ''){
                          $('#p4').html(a4)
                        }

                        if(a5 != ''){
                          $('#p5').append(a5)
                        }

                      }else{

                      }
                    }, 'json')
      }
    }

    function addComment2(pid){

      if(ccrid == null){
        swal("ขออภัย", "เกิดข้อผิดพลาด", "error")
        return ;
      }

      if(pid == 1){
        var datas = editData1.getData()
        if(datas == ''){
          swal("ขออภัย", "กรุณากรอกข้อมูลให้ครบถ้วน", "error")
          return ;
        }

        var param = {
          part_id: pid,
          user: current_user,
          id_rs: current_rs_id,
          data: datas,
          rid: ccrid
        }

        lp.sl()

        var jxhr = $.post(ws_url + 'controller/addCommentQuestion.php', param, function(){})
                    .always(function(r){
                      if(r == 'Y'){
                        // window.location.reload()
                        loadComment()
                      }else{
                        console.log(r);
                        swal("ขออภัย", "กรุณากรอกข้อมูลให้ครบถ้วน", "error")
                        lp.hl()
                        return ;
                      }
                    })
                    .fail(function(){
                      onFail()
                    })
      }else if((pid == 2) || (pid == 3) || (pid == 4)){
        var datas = ''

        if(pid == 2){
          datas = editData_qp1_2.getData()
        }

        if(pid == 3){
          datas = editData_qp2_2.getData()
        }

        if(pid == 4){
          datas = editData_qp3_2.getData()
        }


        if(datas == ''){
          swal("ขออภัย", "กรุณากรอกข้อมูลให้ครบถ้วน", "error")
          return ;
        }

        var param = {
          part_id: pid,
          user: current_user,
          id_rs: current_rs_id,
          data: datas,
          rid: ccrid
        }

        lp.sl()

        var jxhr = $.post(ws_url + 'controller/addCommentQuestion.php', param, function(){})
                    .always(function(r){
                      if(r == 'Y'){
                        // window.location.reload()
                        loadComment()
                      }else{
                        console.log(r);
                        swal("ขออภัย", "กรุณากรอกข้อมูลให้ครบถ้วน", "error")
                        lp.hl()
                        return ;
                      }
                    })
                    .fail(function(){
                      onFail()
                    })
      }else{
        var notetitle = $('#txtNotetitle2').val()
        var datas = editData22.getData()
        if((datas == '') || (notetitle == '')){
          swal("ขออภัย", "กรุณากรอกข้อมูลให้ครบถ้วน", "error")
          return ;
        }

        var param = {
          part_id: pid,
          user: current_user,
          id_rs: current_rs_id,
          tt: notetitle,
          data: datas,
          rid: ccrid
        }

        lp.sl()

        var jxhr = $.post(ws_url + 'controller/addCommentQuestion.php', param, function(){})
                    .always(function(r){
                      if(r == 'Y'){
                        // window.location.reload()
                        loadComment()
                      }else{
                        console.log(r);
                        swal("ขออภัย", "กรุณากรอกข้อมูลให้ครบถ้วน", "error")
                        lp.hl()
                        return ;
                      }
                    })
                    .fail(function(){
                      onFail()
                    })


      }
    }

    function addComment(pid){

      if(pid == 1){
        var datas = editData.getData()
        if(datas == ''){
          swal("ขออภัย", "กรุณากรอกข้อมูลให้ครบถ้วน", "error")
          return ;
        }

        var param = {
          part_id: pid,
          user: current_user,
          id_rs: current_rs_id,
          data: datas
        }

        lp.sl()

        var jxhr = $.post(ws_url + 'controller/addCommentQuestion.php', param, function(){})
                    .always(function(r){
                      if(r == 'Y'){
                        // window.location.reload()
                        loadComment()
                      }else{
                        console.log(r);
                        swal("ขออภัย", "กรุณากรอกข้อมูลให้ครบถ้วน", "error")
                        lp.hl()
                        return ;
                      }
                    })
                    .fail(function(){
                      onFail()
                    })
      }else if((pid == 2) || (pid == 3) || (pid == 4)){
        var datas = ''

        if(pid == 2){
          // datas = $('#qp1').val()
          datas = editData_qp1.getData()
        }

        if(pid == 3){
          datas = editData_qp2.getData()
        }

        if(pid == 4){
          datas = editData_qp3.getData()
        }


        if(datas == ''){
          swal("ขออภัย", "กรุณากรอกข้อมูลให้ครบถ้วน", "error")
          return ;
        }

        var param = {
          part_id: pid,
          user: current_user,
          id_rs: current_rs_id,
          data: datas
        }

        lp.sl()

        var jxhr = $.post(ws_url + 'controller/addCommentQuestion.php', param, function(){})
                    .always(function(r){
                      if(r == 'Y'){
                        // window.location.reload()
                        loadComment()
                      }else{
                        console.log(r);
                        swal("ขออภัย", "กรุณากรอกข้อมูลให้ครบถ้วน", "error")
                        lp.hl()
                        return ;
                      }
                    })
                    .fail(function(){
                      onFail()
                    })
      }else{
        var notetitle = $('#txtNotetitle').val()
        var datas = editData2.getData()
        if((datas == '') || (notetitle == '')){
          swal("ขออภัย", "กรุณากรอกข้อมูลให้ครบถ้วน", "error")
          return ;
        }

        var param = {
          part_id: pid,
          user: current_user,
          id_rs: current_rs_id,
          tt: notetitle,
          data: datas
        }

        lp.sl()

        var jxhr = $.post(ws_url + 'controller/addCommentQuestion.php', param, function(){})
                    .always(function(r){
                      if(r == 'Y'){
                        // window.location.reload()
                        loadComment()
                      }else{
                        console.log(r);
                        swal("ขออภัย", "กรุณากรอกข้อมูลให้ครบถ้วน", "error")
                        lp.hl()
                        return ;
                      }
                    })
                    .fail(function(){
                      onFail()
                    })


      }
    }

    function setRID(id){
      $('#txtRID').val(id)

      if($("#cb1").is(':checked')){
        $("#cb1").trigger('click')
      }

      if($("#cb2").is(':checked')){
        $("#cb2").trigger('click')
      }

      if($("#cb3").is(':checked')){
        $("#cb3").trigger('click')
      }

      if($("#cb4").is(':checked')){
        $("#cb4").trigger('click')
      }

      if($("#cb5").is(':checked')){
        $("#cb5").trigger('click')
      }
    }





    function lcd1(){
      var param = {
        id: current_user,
        id_rs: current_rs_id
      }

      var jxhr = $.post(ws_url + 'controller/get-lastmsg.php', param, function(){}, 'json')
                  .always(function(resp){
                    resp.forEach(function(i){
                      editData.setData(i.rwp_info);
                    })
                  }, 'json')
    }

    function delete_file_reviewer_summary(fid){
      var param = {
        id_rs: current_rs_id,
        rirsf_id: fid
      }

      var jxhr = $.post(ws_url + 'controller/staff/delete_reviewer_file_summary.php', param, function(){})
                  .always(function(resp){
                    if(resp == 'Y'){
                      setTimeout(function(){
                        checkDataSummary()
                        lp.hl()
                      }, 1000)

                    }else{
                      alert('ไม่สามารถลบรายการได้')
                      lp.hl()
                    }
                  })
                  .fail(function(){
                    alert('ไม่สามารถเชื่อมต่อฐานข้อมูบได้')
                    lp.hl()
                  })
    }

    $(function(){

      $('#txtFBResult').change(function(){
        if($('#txtFBResult').val() == 1){
          $('#resultAppDiv').removeClass('dn')
        }else{
          $('#resultAppDiv').addClass('dn')
        }
      })

      $('#txtResult').change(function(){
        if($('#txtResult').val()=='2'){
          $('.passPanal').addClass('dn')
        }else if($('#txtResult').val()=='3'){
          $('.passPanal').removeClass('dn')
        }else{
          $('.passPanal').addClass('dn')
        }
      })

      $('.myForm').submit(function(){
        if($('#txtResult').val() == '2'){
          if(editData.getData() == ''){
            swal("คำเตือน", "กรุณากรอกข้อความที่จะส่งถึงหัวหน้าโครงการวิจัยก่อนทำการบันทึก", "error")
            return ;
          }

          var param = {
            sess_id: current_rs,
            id_rs: current_rs_id,
            info: editData.getData(),
            id: current_user,
            next_status: '2'
          }

          var jxhr = $.post(ws_url + 'controller/staff/replay_back_2.php', param, function(){}, 'json')
                      .always(function(snap){
                        if((snap!='') && (snap.length > 0)){

                          snap.forEach(function(i){

                            if(i.status == 'Y'){

                              var dataContent = '<h3>ผลการตรวจสอบความถูกต้องของเอกสารโครงการวิจัยเพื่อขอพิจารณาจริยธรรมการวิจัยในมนุษย์</h3>' +
                                                '<p>เรียน ' + i.fullname + '</p>' +
                                                '<p>เจ้าหน้าที่สำนักงานจริยธรรมการวิจัยในมนุษย์ได้ทำการตรวจสอบความครบถ้วนและถูกต้องเอกสารเรียบร้อยแล้ว โดยผลการพิจารณาได้แก่ <span style="font-size: 1.3em; color: red;">เอกสารไม่ถูกต้อง/ไม่ครบถ้วน</span> ตามข้อมูลดังต่อไปนี้' +
                                                '</p>' +
                                                '<p>' +
                                                  '<div style="padding: 20px; background: rgb(240, 240, 240);">' + editData.getData() + '</div>' +
                                                '</p>' +
                                                '<p>ทั้งนี้ ท่านสามารถตรวจสอบข้อมูลอื่น ๆ เพิ่มเติมได้ที่ <a href="' + root_domain + '" target="_blank">' + root_domain +'</a></p>' +
                                                '<p>จึงเรียนมาเพื่อทราบ <br>ระบบสารสนเทศเพื่อการจัดการงานวิจัย (RMIS)</p>';

                              var emailParam = {
                                email: emailConfig.user,
                                api_key: emailConfig.key,
                                title: "{ No-reply-from-RMIS } ผลการพิจารณาความถูกต้องของเอกสารโครงการวิจัยเพื่อขอพิจารณาจริยธรรมการวิจัยในมนุษย์",
                                to_email: i.email ,
                                content: dataContent
                              }
                              var jxhr = $.post(emailProvider, emailParam, function(){})
                                          .always(function(res){
                                            if(res!='Y'){
                                              // main_app.emailErr('Change password', window.localStorage.getItem('rmis_current_user_email'))
                                            }
                                          })

                              swal({
                                title: "ดำเนินการสำเร็จ",
                                text: "กดตกลงเพื่อกลับสู่หน้ารายการ",
                                type: "success",
                                showCancelButton: false,
                                confirmButtonColor: "#126cd5",
                                confirmButtonText: "ตกลง",
                                closeOnConfirm: false
                              },
                              function(){
                                window.location = 'rs-init-new.html'
                              });

                            }else{
                              swal("เกิดข้อผิดพลาด", "ไม่สามารถส่งข้อมูลได้", "error")
                              return ;
                            }
                          })
                        }else{
                          swal("เกิดข้อผิดพลาด", "ไม่สามารถส่งข้อมูลได้", "error")
                          return ;
                        }
                      }, 'json')
                      .fail(function(){
                        swal("เกิดข้อผิดพลาด", "ไม่สามารถเชื่อมต่อฐานข้อมูลได้ กรุณาลองใหม่ภายหลัง", "error")
                        return ;
                      })
        }
        // In Correct
        else {

          var check = 0;
          if(editData.getData() == ''){
            check++;
          }

          if($('#txtEC').val() == ''){
            check++;
          }

          if($('#txtYear').val() == ''){
            check++;
          }

          if($('#txtDept').val() == ''){
            check++;
          }

          if($('#txtPertype').val() == ''){
            check++;
          }

          if(check!=0){
            swal("คำเตือน", "กรุณากรอกข้อมูลให้ครบถ้วนก่อนทำการบันทึก", "error")
            return ;
          }

          var param = {
            sess_id: current_rs,
            id_rs: current_rs_id,
            info: editData.getData(),
            id: current_user,
            ec: $('#txtEC').val(),
            year: $('#txtYear').val(),
            dept: $('#txtDept').val(),
            ptype: $('#txtPertype').val(),
            next_status: '3'
          }

          swal({
            title: "คำเตือน",
            text: "ท่านต้องการปรับปรุงข้อมูลหรือไม่",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#DD6B55",
            confirmButtonText: "ปรับปรุง",
            cancelButtonText: "ไม่ปรับปรุง",
            closeOnConfirm: false,
            closeOnCancel: false
          },
            function(isConfirm){

              lp.sl();
               if (isConfirm) { // เปลี่ยนด้วย
                  var jxhr = $.post(ws_url + 'controller/staff/replay_back_3_update.php', param, function(){}, 'json')
                              .always(function(snap){

                                if((snap!='') && (snap.length > 0)){

                                  snap.forEach(function(i){

                                    if(i.status == 'Y'){

                                      var dataContent = '<h3>ผลการตรวจสอบความถูกต้องของเอกสารโครงการวิจัยเพื่อขอพิจารณาจริยธรรมการวิจัยในมนุษย์ REC.' + i.rec_id + '</h3>' +
                                                        '<p>เรียน ' + i.fullname + '</p>' +
                                                        '<p>เจ้าหน้าที่สำนักงานจริยธรรมการวิจัยในมนุษย์ได้ทำการตรวจสอบความครบถ้วนและถูกต้องเอกสารเรียบร้อยแล้ว โดยผลการพิจารณาได้แก่ <span style="font-size: 1.3em; color: green;">เอกสารเบื้องต้นถูกต้อง เสนอเลขา EC ตรวจสอบ</span> และอยู่ระหว่างกระบวนส่งต่อเลขา EC เพื่อทำการพิจารณาต่อไป' +
                                                        '</p>' +
                                                        '<p>ทั้งนี้ ท่านสามารถตรวจสอบข้อมูลอื่น ๆ เพิ่มเติมได้ที่ <a href="' + root_domain + '" target="_blank">' + root_domain +'</a></p>' +
                                                        '<p>จึงเรียนมาเพื่อทราบ <br>ระบบสารสนเทศเพื่อการจัดการงานวิจัย (RMIS)</p>';

                                      var emailParam = {
                                        email: emailConfig.user,
                                        api_key: emailConfig.key,
                                        title: "{ No-reply } REC." + i.rec_id + " : ผลการพิจารณาความถูกต้องของเอกสารโครงการวิจัยเพื่อขอพิจารณาจริยธรรมการวิจัยในมนุษย์",
                                        to_email: i.email ,
                                        content: dataContent
                                      }
                                      var jxhr = $.post(emailProvider, emailParam, function(){})
                                                  .always(function(res){
                                                    if(res!='Y'){
                                                      // main_app.emailErr('Change password', window.localStorage.getItem('rmis_current_user_email'))
                                                    }
                                                  })

                                      swal({
                                        title: "ดำเนินการสำเร็จ",
                                        text: "กดตกลงเพื่อกลับสู่หน้ารายการ",
                                        type: "success",
                                        showCancelButton: false,
                                        confirmButtonColor: "#126cd5",
                                        confirmButtonText: "ตกลง",
                                        closeOnConfirm: false
                                      },
                                      function(){
                                        window.location = 'rs-init-new.html'
                                      });

                                    }else{
                                      lp.hl();
                                      swal("เกิดข้อผิดพลาด", "ไม่สามารถส่งข้อมูลได้", "error")
                                      return ;
                                    }
                                  })
                                }else{
                                  lp.hl();
                                  swal("เกิดข้อผิดพลาด", "ไม่สามารถส่งข้อมูลได้", "error")
                                  return ;
                                }
                              }, 'json')
                              .fail(function(){
                                lp.hl();
                                swal("เกิดข้อผิดพลาด", "ไม่สามารถเชื่อมต่อฐานข้อมูลได้ กรุณาลองใหม่ภายหลัง", "error")
                                return ;
                              })
               }
               else { //ไม่เปลี่ยน
                 var jxhr = $.post(ws_url + 'controller/staff/replay_back_3.php', param, function(){}, 'json')
                             .always(function(snap){

                               if((snap!='') && (snap.length > 0)){

                                 snap.forEach(function(i){

                                   if(i.status == 'Y'){

                                     var dataContent = '<h3>ผลการตรวจสอบความถูกต้องของเอกสารโครงการวิจัยเพื่อขอพิจารณาจริยธรรมการวิจัยในมนุษย์ REC.' + i.rec_id + '</h3>' +
                                                       '<p>เรียน ' + i.fullname + '</p>' +
                                                       '<p>เจ้าหน้าสำนักงานจริยธรรมการวิจัยในมนุษย์ได้ทำการตรวจสอบความครบถ้วนและถูกต้องเอกสารเรียบร้อยแล้ว โดยผลการพิจารณาได้แก่ <span style="font-size: 1.3em; color: green;">เอกสารถูกต้อง</span> และอยู่ระหว่างกระบวนส่งต่อเลขา EC เพื่อทำการพิจารณาต่อไป' +
                                                       '</p>' +
                                                       '<p>ทั้งนี้ ท่านสามารถตรวจสอบข้อมูลอื่น ๆ เพิ่มเติมได้ที่ <a href="' + root_domain + '" target="_blank">' + root_domain +'</a></p>' +
                                                       '<p>จึงเรียนมาเพื่อทราบ <br>ระบบสารสนเทศเพื่อการจัดการงานวิจัย (RMIS)</p>';

                                     var emailParam = {
                                       email: emailConfig.user,
                                       api_key: emailConfig.key,
                                       title: "{ No-reply } REC." + i.rec_id + " : ผลการพิจารณาความถูกต้องของเอกสารโครงการวิจัยเพื่อขอพิจารณาจริยธรรมการวิจัยในมนุษย์",
                                       to_email: i.email ,
                                       content: dataContent
                                     }
                                     var jxhr = $.post(emailProvider, emailParam, function(){})
                                                 .always(function(res){
                                                   if(res!='Y'){
                                                     // main_app.emailErr('Change password', window.localStorage.getItem('rmis_current_user_email'))
                                                   }
                                                 })

                                     swal({
                                       title: "ดำเนินการสำเร็จ",
                                       text: "กดตกลงเพื่อกลับสู่หน้ารายการ",
                                       type: "success",
                                       showCancelButton: false,
                                       confirmButtonColor: "#126cd5",
                                       confirmButtonText: "ตกลง",
                                       closeOnConfirm: false
                                     },
                                     function(){
                                       window.location = 'rs-init-new.html'
                                     });

                                   }else{
                                     lp.hl();
                                     swal("เกิดข้อผิดพลาด", "ไม่สามารถส่งข้อมูลได้", "error")
                                     return ;
                                   }
                                 })
                               }else{
                                 lp.hl();
                                 swal("เกิดข้อผิดพลาด", "ไม่สามารถส่งข้อมูลได้", "error")
                                 return ;
                               }
                             }, 'json')
                             .fail(function(){
                               lp.hl();
                               swal("เกิดข้อผิดพลาด", "ไม่สามารถเชื่อมต่อฐานข้อมูลได้ กรุณาลองใหม่ภายหลัง", "error")
                               return ;
                             })
               }
          });

        }
      })
    })

    function getNext14Days(){
      var today = new Date(+new Date + 12096e5);
      var dd = today.getDate();
      var mm = today.getMonth()+1; //January is 0!
      var yyyy = today.getFullYear();

      if(dd<10){
          dd='0'+dd;
      }

      if(mm<10){
          mm='0'+mm;
      }

      var today = yyyy + '-' + mm + '-' + dd;


      return main_app.convertThaidate(today);
    }

    function loadStaffLog(){

      var param = {
        id_rs: current_rs_id
      }
      var jxhr = $.post(ws_url + 'controller/readStaffLog.php', param, function(){}, 'json')
                  .always(function(r){
                    console.log(r);
                    if((r!='') && (r.length > 0)){
                      a5 = '';
                      r.forEach(function(i){

                        $dinfo = i.log_detail

                        if((i.log_detail == '') || (i.log_detail == null)){
                          $dinfo = '-'
                        }

                        a5 += '<tr>' +
                                '<td colspan="2"><div class="f500 txt-dark">' + i.log_by + '</div>' + $dinfo +
                                '</td>' +
                              '</tr>';
                      })
                      if(a5 != ''){
                        $('#p5').append(a5)
                      }
                    }
                  })
    }

    function checkNextStatus(){

      checkrtype = $('#txtRTypess').text()

      if((checkrtype == 'Fullboard (Social)') || (checkrtype == 'Fullboard (Bio)')){

        $('.editFB').removeClass('dn')

        var param = {
          id_rs: current_rs_id
        }

        var jxhr = $.post(ws_url + 'controller/get_fb_argendar.php', param, function(){}, 'json')
                    .always(function(snap){

                      if((snap != '') && (snap.length > 0)){
                        snap.forEach(function(i){
                          $mdate = '-'

                          if(i.rafa_date != null){
                            $mdate = main_app.convertThaidate(i.rafa_date)
                          }
                          $('#txtDatemeeting').text('ครั้งที่ ' + i.rafa_agn + ', วันที่ประชุม ' + $mdate)


                          if(i.rafa_result != null){
                            if(i.rafa_result == 1){
                              $('#txtResult').text('Approve และรายงานทุก ' + i.rafa_progress + ' เดือน' )
                            }else if(i.rafa_result == 2){
                              $('#txtResult').text('Minor')
                            }else if(i.rafa_result == 3){
                              $('#txtResult').text('Major')
                            }
                          }

                        })
                        // fb_status = 1;
                        $('#btnFbtoEC').prop('disabled', '')


                      }
                    }, 'json')
        $('#fbBtn').removeClass('dn')
        $('#expBtn').addClass('dn')

        // txtAgender
        if(checkrtype == 'Fullboard (Social)'){
          $('#txtAgender').val('4.3')
        }else{
          $('#txtAgender').val('4.2')
        }

      }else if(checkrtype == 'Expedited'){
        // $('#fbBtn').addClass('dn')
        // $('#expBtn').removeClass('dn')

        $('#btnFbtoEC').prop('disabled', '')
      }else{
        // $('#fbBtn').addClass('dn')
        // $('#expBtn').addClass('dn')

        $('#btnFbtoEC').prop('disabled', '')
      }
    }

    function updateMeetingResult(){
      var check = 0
      $('.form-group').removeClass('has-error')

      if($('#txtFBResult').val() == ''){
        check++;
        $('#txtFBResult').parent().addClass('has-error')
      }

      if($('#txtFBResult').val() == 1){
        if($('#txtFBResultApprove').val() == ''){
          check++;
          $('#txtFBResultApprove').parent().addClass('has-error')
        }
      }

      if(check != 0){
        swal("คำเตือน", "กรุณากรอกข้อมูลให้ครบถ้วน", "error")
        return ;
      }

      var param = {
          id_rs: current_rs_id,
          result: $('#txtFBResult').val(),
          result_progress: $('#txtFBResultApprove').val()
      }

      lp.sl()
      $('#btnBoxClose2').trigger('click')

      var jxhr = $.post(ws_url + 'controller/set_fb_result.php', param, function(){})
                  .always(function(resp){
                      if(resp == 'Y'){
                        window.location.reload()
                      }else{
                        lp.sl()
                        swal("ขออภัย", "ไม่สามารถปรับปรุงข้อมูลได้", "error")
                      }
                  })
                  .fail(function(){
                    onFail()
                  })

    }

    function updateMeetingDate(){
      if($('#start_date').val() == ''){
        swal("คำเตือน", "กรุณากรอกข้อมูลให้ครบถ้วน", "error")
        return ;
      }

      var param = {
        id_rs: current_rs_id,
        mdate: $('#start_date').val()
      }

      lp.sl()
      $('#btnBoxClose1').trigger('click')

      var jxhr = $.post(ws_url + 'controller/set_fb_meetingdate.php', param, function(){})
                  .always(function(resp){
                      if(resp == 'Y'){
                        window.location.reload()
                      }else{
                        lp.sl()
                        swal("ขออภัย", "ไม่สามารถปรับปรุงข้อมูลวันประชุมได้", "error")
                      }
                  })
                  .fail(function(){
                    onFail()
                  })


    }
  </script>
</body>

</html>
